import winreg

def create_registry_keys():
    base_path = r"SOFTWAREPoliciesMicrosoftWindows Defender"
    sub_key = r"Real-Time Protection"
    full_path = base_path + "\" + sub_key

    try:
        # Открываем или создаём подраздел Real-Time Protection в HKLM
        key = winreg.CreateKeyEx(winreg.HKEY_LOCAL_MACHINE, full_path, 0, winreg.KEY_WRITE | winreg.KEY_WOW64_64KEY)

        # Список параметров и значение для них
        params = [
            "DisableBehaviourMonitoring",
            "DisableOnAccessProtection",
            "DisableScanOnRealTimeEnable",
            "DisableIOAVPProtection"
        ]
        value = 1

        # Создаём параметры DWORD и устанавливаем значение 1
        for param in params:
            winreg.SetValueEx(key, param, 0, winreg.REG_DWORD, value)
            print(f"Параметр {param} установлен в {value}")

        winreg.CloseKey(key)
        print("Все параметры успешно созданы в реестре.")

    except PermissionError:
        print("Ошибка: необходимы права администратора для изменения системного реестра.")
    except Exception as e:
        print(f"Произошла ошибка: {e}")

if __name__ == "__main__":
    create_registry_keys()
